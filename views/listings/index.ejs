<% layout("/layouts/boilerplate.ejs")%><%= success %>
<style>
    .tax-info{
        display:none;
    }
</style>
    <h3>all furnitures</h3>
<div class="form-check form-switch form-check-reverse">
  <input class="form-check-input" type="checkbox" role="switch" id="switchCheckDefault">
  <label class="form-check-label" for="switchCheckDefault">Display total after taxes</label>
</div>
    <div class="row row-cols-lg-4 row-cols-md-3 row-cols-sm-1" style="margin:10px">
    <% for(let list of alllistings){ %>
                <div class="card col">
                <a href="/listings/<%=list._id%>" class="link-class">
                <img src=<%=list.image.url %> class="card-img-top" alt="" style="height: 20rem;">
                    <div class="card-body">
                        <h5 class="card-title">
                            <%=list.name %>
                        </h5>
                        <p class="card-text">
                            <%=list.brand %><br>&#8377;<%=list.price.toLocaleString("en-IN") %><i class="tax-info">+18% GST= &#8377;<%= (list.price*0.18+ list.price).toLocaleString("en-IN")%></i>
                        </p>
                        <a href="#" class="btn btn-primary">BUY</a>
                    </div>
                   </a>
                  </div>
    <% }%>
    </div>

    <!-- <% for(let list of alllistings){ %>
<li><a href="/listings/<%=list._id%>"><%= list.name %></a></li>  

<% }%> -->

<script>
    let taxSwitch = document.getElementById("switchCheckDefault");
    taxSwitch.addEventListener("click", () => {
    let taxInfo = document.getElementsByClassName("tax-info");
    for (info of taxInfo) {
    if(info.style.display != "inline") {
    info.style.display = "inline";
    } else {
    info.style.display = "none";
    }
    }
    });

</script>